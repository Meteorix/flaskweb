(function(e){function t(t){for(var a,i,c=t[0],u=t[1],f=t[2],p=t[3]||[],h=0,g=[];h<c.length;h++)i=c[h],r[i]&&g.push(r[i][0]),r[i]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);d&&d(t);var m=document.getElementsByTagName("head")[0];p.forEach(function(e){if(void 0===r[e]){r[e]=null;var t=document.createElement("link");l.nc&&t.setAttribute("nonce",l.nc),t.rel="prefetch",t.as="script",t.href=s(e),m.appendChild(t)}});while(g.length)g.shift()();return o.push.apply(o,f||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,i=1;i<n.length;i++){var s=n[i];0!==r[s]&&(a=!1)}a&&(o.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},i={app:0},r={app:0},o=[];function s(e){return l.p+"js/"+({"login-page":"login-page","not-found-page":"not-found-page",pdfjsWorker:"pdfjsWorker"}[e]||e)+"."+{"login-page":"bf2ca404","not-found-page":"67fed307",pdfjsWorker:"358d2e0f"}[e]+".js"}function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"login-page":1,"not-found-page":1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=new Promise(function(t,n){for(var a="css/"+({"login-page":"login-page","not-found-page":"not-found-page",pdfjsWorker:"pdfjsWorker"}[e]||e)+"."+{"login-page":"e6e175db","not-found-page":"86e776d6",pdfjsWorker:"31d6cfe0"}[e]+".css",r=l.p+a,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var c=o[s],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===a||u===r))return t()}var f=document.getElementsByTagName("style");for(s=0;s<f.length;s++){c=f[s],u=c.getAttribute("data-href");if(u===a||u===r)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var a=t&&t.target&&t.target.src||r,o=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");o.request=a,delete i[e],d.parentNode.removeChild(d),n(o)},d.href=r;var p=document.getElementsByTagName("head")[0];p.appendChild(d)}).then(function(){i[e]=0}));var a=r[e];if(0!==a)if(a)t.push(a[2]);else{var o=new Promise(function(t,n){a=r[e]=[t,n]});t.push(a[2]=o);var c,u=document.getElementsByTagName("head")[0],f=document.createElement("script");f.charset="utf-8",f.timeout=120,l.nc&&f.setAttribute("nonce",l.nc),f.src=s(e),c=function(t){f.onerror=f.onload=null,clearTimeout(d);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+a+": "+i+")");o.type=a,o.request=i,n[1](o)}r[e]=void 0}};var d=setTimeout(function(){c({type:"timeout",target:f})},12e4);f.onerror=f.onload=c,u.appendChild(f)}return Promise.all(t)},l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var f=0;f<c.length;f++)t(c[f]);var d=u;t([[],{},0,["login-page","not-found-page"]]),o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0f0c":function(e,t,n){},"0f36":function(e,t,n){},"0fbd":function(e,t,n){e.exports=n.p+"img/prime-logo-black.616ac28a.svg"},"0ffd":function(e,t,n){},1:function(e,t){},1567:function(e,t,n){"use strict";var a=n("f6d2"),i=n.n(a);i.a},"196c":function(e,t,n){"use strict";var a=n("0f36"),i=n.n(a);i.a},"1a1f":function(e,t,n){},2:function(e,t){},"297c":function(e,t,n){"use strict";var a=n("1a1f"),i=n.n(a);i.a},3:function(e,t){},"3c42":function(e,t,n){},"3f7d":function(e,t,n){e.exports=n.p+"img/doc.df6548fb.svg"},4:function(e,t){},"458f":function(e,t,n){},"464d":function(e,t,n){"use strict";var a=n("a460"),i=n.n(a);i.a},"542d":function(e,t,n){"use strict";var a=n("a60a"),i=n.n(a);i.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var a=n("bc3a"),i=n.n(a),r=n("2b0e"),o=n("5c96"),s=n("d4ec"),l=n("bee2"),c=n("91d1"),u="AUTH_TOKEN",f="USER_NAME",d=function(){function e(){Object(s["a"])(this,e)}return Object(l["a"])(e,null,[{key:"isLoggedIn",value:function(){return!!e.getAuthToken()}},{key:"getAuthToken",value:function(){return c["a"].getItem(u)}},{key:"getLoggedUserName",value:function(){return c["a"].getItem(f)}}]),e}(),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view")},h=[],g={name:"App",mounted:function(){var e=document.getElementById("skeleton");e&&document.body.removeChild(e)}},m=g,v=(n("5c0b"),n("2877")),_=Object(v["a"])(m,p,h,!1,null,null,null);_.options.__file="App.vue";var y=_.exports,C=n("8c4f"),b=n("323e"),w=n.n(b),x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"function-page"},[a("div",{staticClass:"function-page_header"},[a("div",{staticClass:"header-left"},[a("img",{staticClass:"prime-logo",attrs:{src:n("0fbd")},on:{click:e.goMainPage}}),a("span",{staticClass:"logo-text"},[e._v("Shannon.AI")])]),a("div",{staticClass:"header-right row"},[a("user-account")],1)]),a("div",{staticClass:"function-page_container row"},[a("div",{staticClass:"function-page_container_leftmenus row"},e._l(e.meunsList,function(t,n){return a("router-link",{key:n,class:{disabled:5===n},attrs:{to:{name:t.pathName}}},[a("div",{class:"small-img_"+n}),a("div",{staticClass:"menus-title"},[e._v(e._s(t.title))])])}),1),a("div",{staticClass:"function-page_container_right"},[a("router-view",{staticClass:"page-container"})],1)])])},P=[],k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-account-container"},[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleCommand}},[n("div",[e._v(e._s(e.userName)+" "),n("span",{staticClass:"el-icon-arrow-down"})]),n("el-dropdown-menu",{staticClass:"user-account",attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{staticClass:"logout",attrs:{command:"logout"}},[n("i",{staticClass:"icon"}),n("span",{staticClass:"name"},[e._v("退出登陆")])])],1)],1)],1)},F=[],T=n("9ce6"),D={name:"userAccount",data:function(){return{userName:""}},methods:{handleCommand:function(e){var t=this;"logout"===e&&T["a"].logout().finally(function(){t.$router.push({path:"/login"})})}},mounted:function(){this.userName=d.getLoggedUserName()}},I=D,j=(n("ec13"),n("a5da"),Object(v["a"])(I,k,F,!1,null,"2a204a6b",null));j.options.__file="UserAccount.vue";var E=j.exports,L={name:"functionPageTemplate",data:function(){return{meunsList:[{pathName:"extraction",title:"抽取"}]}},methods:{goMainPage:function(){this.$router.push("/")}},components:{UserAccount:E}},S=L,O=(n("542d"),Object(v["a"])(S,x,P,!1,null,"13ddca5f",null));O.options.__file="PageTemplate.vue";var N=O.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"pdf-extraction-page",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[e.isInitPage?n("div",{staticClass:"pdf-extraction-page_container"},[n("div",{staticClass:"pdf-extraction-page_container_banner"},[n("div",{staticClass:"pdf-extraction-page_container_banner_bg"}),null===this.file?n("file-upload",{staticClass:"file",on:{change:e.onFileChange}}):n("div",{staticClass:"pdf-extraction-page_container_banner_content row"},[-1!==e.fileType.toLowerCase().indexOf("pdf")?n("div",{staticClass:"preview"},[n("canvas",{staticClass:"canvas",attrs:{id:"the-canvas"}})]):e._e(),n("div",{staticClass:"preview-info"},[n("file-header",{staticClass:"top-header",attrs:{filename:e.fileName,type:e.uploadFileType},on:{change:e.onFileChange}})],1)]),n("div",{staticClass:"file-type_group"},[n("el-select",{staticClass:"file-type_group_select",attrs:{placeholder:"请选择文件类型"},model:{value:e.uploadFileType,callback:function(t){e.uploadFileType=t},expression:"uploadFileType"}},e._l(e.uploadFileTypeList,function(e,t){return n("el-option",{key:e+t,attrs:{label:e,value:e}})}),1),n("button",{class:{"btn-gray":null===this.file},attrs:{disabled:e.isDisable},on:{click:e.startExtraction}},[e._v("开始解析")])],1)],1),e._m(0)]):n("div",{ref:"container",staticClass:"pdf-extraction-res"},[n("div",{staticClass:"pdf-extraction-res_header"},[n("div",{staticClass:"goBack",on:{click:e.goBack}},[e._v("后退")]),n("file-header",{staticClass:"top-header",attrs:{filename:e.fileName,type:e.uploadFileType},on:{change:e.onModifyFileChange}})],1),n("div",{staticClass:"pdf-extraction-res_container row"},[e.fileName&&!e.rerender?n("pdf-structure-data",{attrs:{extractedData:e.extractedData,renderPdf:e.renderPdf}}):e._e()],1)])])},A=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pdf-extraction-page_container_footer row"},[n("div",{staticClass:"pdf-extraction-page_container_footer_left"},[n("div",{staticClass:"title"},[e._v("\n          香侬科技文档处理系统\n          "),n("br"),n("span",[e._v("Pdf Retrieval and Information Mining Engine")])])]),n("div",{staticClass:"pdf-extraction-page_container_footer_right"},[n("div",{staticClass:"title"},[e._v("PDF抽取")]),n("div",{staticClass:"content"},[e._v("根据用户对字段的定义，自动抽取目标PDF文件中的结构化字段信息。香侬科技首先使用自研的PDF解析系统，将PDF文件解析为抽取可用的标准格式。再通过基于机器阅读理解（MRC）、命名实体识别（NER）、关系抽取（RE）等的深度学习算法模型对PDF文档进行深度语义理解，并根据客户需要进行重要结构化信息的抽取")])])])}],M=(n("ac6a"),n("28a5"),n("7f7f"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dropbox",class:{dragin:e.isGragIn}},[e._m(0),e._m(1),n("div",{staticClass:"upload-click-choose"},[n("button",{on:{click:e.chooseFile}},[e._v("选择文件")]),n("input",{ref:"file",staticClass:"filebox",attrs:{type:"file",accept:e.fileFormat},on:{change:e.onFileChange}})])])}),U=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icon-box"},[n("div",{staticClass:"icon-pdf"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"upload-text-box"},[n("p",{staticClass:"upload-text"},[e._v("请选择文件，或将其拖入框中")])])}],q=o["Message"],B={props:{fileFormat:{type:String,default:".pdf,.doc,.docx"}},data:function(){return{files:[],isGragIn:!1}},methods:{onDrag:function(e){e.stopPropagation(),e.preventDefault(),this.isGragIn=!0},chooseFile:function(){this.$refs.file.click()},onDrop:function(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files[0],n=t.name.split("."),a=n[n.length-1]||"",i="请选择",r="格式的文件！",o="".concat(i).concat(this.fileFormat).concat(r);t&&this.fileFormat&&this.fileFormat.indexOf(a.toLowerCase())<0?(q({showClose:!0,message:o,type:"error"}),this.isGragIn=!1):t&&this.$emit("change",t)},onDragLeave:function(e){e.stopPropagation(),e.preventDefault(),this.isGragIn=!1},onFileChange:function(){var e=this.$refs.file.files[0],t=e.name.split("."),n=t[t.length-1]||"",a="请选择",i="格式的文件！",r="".concat(a).concat(this.fileFormat).concat(i);e&&this.fileFormat&&this.fileFormat.indexOf(n.toLowerCase())<0?(q({showClose:!0,message:r,type:"error"}),this.isGragIn=!1):e&&this.$emit("change",e)}},mounted:function(){var e=this.$el;e.addEventListener("dragenter",this.onDrag,!1),e.addEventListener("dragover",this.onDrag,!1),e.addEventListener("dragleave",this.onDragLeave,!1),e.addEventListener("drop",this.onDrop,!1)}},V=B,R=(n("1567"),Object(v["a"])(V,M,U,!1,null,"571aae9c",null));R.options.__file="FileUpload.vue";var G=R.exports,W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"file-header"},[a("span",{staticClass:"file-group"},[-1!==this.filename.toLowerCase().indexOf(".pdf")?a("img",{staticClass:"file-logo",attrs:{src:n("5730")}}):a("img",{staticClass:"file-logo",attrs:{src:n("3f7d")}}),a("span",{staticClass:"file-name"},[e._v(e._s(this.displayFilename))])]),e.type?a("span",{staticClass:"file-type-title"},[e._v("报告类型:")]):e._e(),e.type?a("div",{staticClass:"file-type"},[e._v(e._s(this.type))]):e._e(),a("div",{staticClass:"file-change"},[a("file-change",{staticClass:"file",on:{change:e.onPdfFileChange}})],1)])},H=[],z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file-upload"},[n("input",{ref:"file",staticClass:"inputfile",attrs:{type:"file",id:e.uniqueId,accept:e.fileFormat},on:{change:e.onFileChange}}),n("label",{ref:"label",staticClass:"row",class:{"has-file":e.hasFile},attrs:{for:e.uniqueId}},[n("div",{staticClass:"text"},[e._v(e._s(e.text))])])])},J=[],K=function(){function e(){Object(s["a"])(this,e)}return Object(l["a"])(e,null,[{key:"getUniqueId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"chart",t=Math.floor(1e9*Math.random());return"".concat(e,"-").concat(+new Date,"-").concat(t)}}]),e}(),Q=o["Message"],X={name:"file-change",props:{text:{type:String,default:"更改文件"},changeFile:{type:Boolean,default:!1},fileFormat:{type:String,default:".pdf,.doc,.docx"}},data:function(){return{fileName:"更改文件",uniqueId:K.getUniqueId("file")}},computed:{hasFile:function(){return"更改文件"!==this.fileName}},methods:{onFileChange:function(){var e=this.$refs.file.files[0];this.fileName=e?e.name:"上传文件";var t="请选择",n="格式的文件！",a="".concat(t).concat(this.fileFormat).concat(n),i=e.name.split("."),r=i[i.length-1]||"";e&&this.fileFormat&&this.fileFormat.indexOf(r.toLowerCase())<0?Q({showClose:!0,message:a,type:"error"}):e&&this.$emit("change",e)}}},Y=X,Z=(n("7984"),Object(v["a"])(Y,z,J,!1,null,"7546438d",null));Z.options.__file="FileChange.vue";var ee=Z.exports,te={name:"file-header",props:{filename:{type:String,default:""},type:{type:String,default:""}},data:function(){return{displayFilename:""}},methods:{onPdfFileChange:function(e){this.displayFilename=e.name.substr(0,e.name.length-4),this.$emit("change",e)}},mounted:function(){this.displayFilename=this.filename.substr(0,this.filename.length-4)},components:{FileChange:ee}},ne=te,ae=(n("196c"),Object(v["a"])(ne,W,H,!1,null,"5e7a2fda",null));ae.options.__file="FileHeader.vue";var ie=ae.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row container"},[a("div",{staticClass:"left"},[a("div",{ref:"viewer",staticClass:"view-container"},[a("div",{staticClass:"pdfViewer"})])]),e.extractedData.length>0?a("div",{staticClass:"extracted-data right"},[a("div",{staticClass:"result-title"},[e._v("共抽取"),a("span",{staticClass:"extracted-count"},[e._v(e._s(e.wordNum))]),e._v("个字段")]),e._l(e.extractedData,function(t,i){return a("div",{key:i,staticClass:"result-item"},[0!==t.values.length?a("div",{staticClass:"item-collapse"},[a("div",{staticClass:"item-header",on:{click:function(n){e.showToggle(t)}}},[a("span",{staticClass:"item-key"},[e._v(e._s(t.key))]),t.show?a("img",{staticClass:"item-logo",attrs:{src:n("5c5b")}}):a("img",{staticClass:"item-logo",attrs:{src:n("d8aa")}})]),t.show?a("div",{staticClass:"item-value"},e._l(t.values,function(t,n){return a("p",{key:n,on:{click:function(n){e.navigateTo(t.pageNum,t.location,i)}}},[e._v(e._s(t.value))])}),0):e._e()]):a("div",{staticClass:"item-disable"},[e._v("\n        "+e._s(t.key)+"\n      ")])])})],2):e._e()])},oe=[],se=(n("c5f6"),n("f13c")),le=n.n(se),ce=n("fba4"),ue=n.n(ce);n("9a26");var fe=n("968b"),de={name:"pdf-structure-data",props:{extractedData:{type:Array},renderPdf:{}},computed:{wordNum:function(){var e=this.extractedData&&this.extractedData.filter(function(e){return 0!==e.values.length});return e.length}},data:function(){return{pdfViewer:null,pdfLinkService:null,loadingTask:null,pdfDoc:null}},methods:{showToggle:function(e){e.show=!e.show},navigateTo:function(e,t){if(e||t){var n=900,a=this.$refs.viewer.querySelector('[data-page-number="'.concat(e,'"]'));le.a.scrollTo(a,500,{container:this.$refs.viewer,offset:Number(t)*n,easing:[.4,0,.2,1]})}},setPdfPageScale:function(){this.pdfViewer.currentScale=.8},viewPdf:function(e){var t=this;return this.pdfLinkService=new fe.PDFLinkService,this.pdfViewer=new fe.PDFViewer({container:this.$refs.viewer,linkService:this.pdfLinkService,removePageBorders:!0}),this.pdfLinkService.setViewer(this.pdfViewer),document.addEventListener("pagesinit",this.setPdfPageScale),this.loadingTask=ue.a.getDocument({data:atob(e),cMapUrl:"/cmaps/",cMapPacked:!0}),this.loadingTask.promise.then(function(e){t.pdfDoc=e,t.pdfViewer.setDocument(e),t.pdfLinkService.setDocument(e,null)})},destory:function(){this.pdfViewer&&(this.pdfViewer.setDocument(null),this.pdfViewer.cleanup(),this.pdfViewer=null),this.pdfLinkService&&(this.pdfLinkService.setDocument(null,null),this.pdfLinkService=null),this.loadingTask&&(this.loadingTask.destroy(),this.loadingTask=null),document.removeEventListener("pagesinit",this.setPdfPageScale)}},mounted:function(){this.viewPdf(this.renderPdf)},beforeDestroy:function(){this.destory()}},pe=de,he=(n("697f"),n("fb8b"),Object(v["a"])(pe,re,oe,!1,null,"5ba0e9b5",null));he.options.__file="PdfStructureData.vue";var ge=he.exports,me=function(){function e(){Object(s["a"])(this,e)}return Object(l["a"])(e,null,[{key:"ocrFile",value:function(e){var t=new FormData;return t.append("file",e),i.a.post("/api/ocr",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return e.data||[]},function(e){return Promise.reject(e)})}},{key:"analyzingPdfFile",value:function(e){var t=new FormData;return t.append("file",e),t.append("mode","presentation"),i.a.post("/api/pdf_content_extraction",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return e.data||[]},function(e){return Promise.reject(e)})}},{key:"analyzingContractPdfFile",value:function(e){var t=new FormData;return t.append("file",e),t.append("mode","presentation"),i.a.post("/api/pdf_insurance",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return console.log(e),e.data||[]},function(e){return Promise.reject(e)})}},{key:"extractPdfStructureData",value:function(e,t){var n=new FormData;return n.append("file",e),n.append("type",t),i.a.post("/api/structure_extraction",n,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){var t=e.data||{},n={};return t&&(n.extractedData=t.data),n.highlightedPdfFile=t.pdf,n},function(e){return Promise.reject(e)}).catch(function(){return{}})}},{key:"sentimentAnalysisData",value:function(e,t){return i.a.post("/api/news_analytics",{title:e,content:t}).then(function(e){return e.data||[]},function(e){return Promise.reject(e)})}},{key:"newsAnalysisData",value:function(e){return i.a.post("/api/news_questions",{text:e}).then(function(e){return e.data||[]},function(e){return Promise.reject(e)})}}]),e}(),ve=n("9511"),_e=n.n(ve),ye={name:"pdf-extraction",data:function(){return{file:null,fileName:"",rerender:!1,extractedData:[],isDisable:!0,renderPdf:"",uploadFileTypeList:["发行办法","发行公告——同业存单","发行公告——金融债券","募集说明书","付息公告","发行结果公告","发行情况公告-同业存单","发行情况公告-超短融资券","发行情况公告-非公开发行债券","发行情况公告-短期融资券","发行情况公告-其他债券","发行有关事宜通知","票面利率重置的公告/利率调整公告","赎回/回售公告","发行章程","兑付公告","债券交易流通要素公告","同业存单流通要素公告"],uploadFileType:"",fileType:"",fileUrl:"",isLoading:!1,isInitPage:!0,activeFileTypeIndex:0,pdfType:"",previewPdfTask:null}},methods:{startExtraction:function(){this.extractPdf(this.file)},onFileChange:function(e){this.file=e,this.fileUrl=URL.createObjectURL(e),this.fileName=e.name,this.file&&(this.isDisable=!1);var t=e.name.split(".");this.fileType=t[t.length-1]||"",-1!==this.fileType.toLowerCase().indexOf("pdf")&&this.previewPdf(this.fileUrl)},onModifyFileChange:function(e){this.destory(),this.file=e,this.fileName=e.name;var t=e.name.split(".");this.fileType=t[t.length-1]||"",this.rerender=!0,this.extractPdf(this.file)},extractPdf:function(e){var t=this;return this.isLoading=!0,this.extractedData=[],this.renderPdf="",me.extractPdfStructureData(e,this.uploadFileType).then(function(e){t.isLoading=!1,t.isInitPage=!1,t.extractedData=e.extractedData.map(function(e){return 0!==e.values.length&&(e.show=!1),e}),t.renderPdf=e.highlightedPdfFile,t.rerender=!1},function(e){e.response&&t.$message.error("请求服务器错误")})},previewPdf:function(e){return this.previewPdfTask=_e.a.getDocument({url:e,cMapUrl:"/cmaps/",cMapPacked:!0}),this.previewPdfTask.then(function(e){e.getPage(1).then(function(e){var t=1.5,n=e.getViewport(t),a=document.getElementById("the-canvas"),i=a.getContext("2d");a.height=n.height,a.width=n.width;var r={canvasContext:i,viewport:n};e.render(r)})})},goBack:function(){this.file=null,this.isInitPage=!0},destory:function(){this.previewPdfTask&&(this.previewPdfTask.destroy(),this.previewPdfTask=null),this.fileUrl&&window.URL.revokeObjectURL(this.fileUrl)}},beforeDestroy:function(){this.destory()},components:{FileUpload:G,FileHeader:ie,PdfStructureData:ge}},Ce=ye,be=(n("464d"),n("297c"),Object(v["a"])(Ce,$,A,!1,null,"013459b7",null));be.options.__file="PdfExtractionPage.vue";var we=be.exports,xe=function(){return n.e("login-page").then(n.bind(null,"48ca"))},Pe=function(){return n.e("not-found-page").then(n.bind(null,"0c8b"))};r["default"].use(C["a"]);var ke=new C["a"]({routes:[{path:"/",component:N,meta:{requiresAuth:!0},children:[{path:"",name:"extraction",component:we}]},{path:"/login",name:"login-page",component:xe},{path:"/*",name:"not-found-page",component:Pe}]});ke.beforeEach(function(e,t,n){e.matched.some(function(e){return e.meta.requiresAuth})?d.isLoggedIn()?(w.a.start(),n()):n({path:"/login",query:{redirect:e.fullPath}}):(w.a.start(),n())}),ke.afterEach(function(){w.a.done()});var Fe=ke;n("abe2");r["default"].use(o["Button"]),r["default"].use(o["Dialog"]),r["default"].use(o["Form"]),r["default"].use(o["FormItem"]),r["default"].use(o["Dropdown"]),r["default"].use(o["DropdownMenu"]),r["default"].use(o["DropdownItem"]),r["default"].use(o["Checkbox"]),r["default"].use(o["Input"]),r["default"].use(o["Loading"].directive),r["default"].use(o["Option"]),r["default"].use(o["Pagination"]),r["default"].use(o["Popover"]),r["default"].use(o["Select"]),r["default"].use(o["Table"]),r["default"].use(o["TableColumn"]),r["default"].use(o["Menu"]),r["default"].use(o["Submenu"]),r["default"].use(o["MenuItem"]),r["default"].use(o["MenuItemGroup"]),r["default"].use(o["Tooltip"]),r["default"].use(o["Tag"]),r["default"].use(o["Collapse"]),r["default"].use(o["CollapseItem"]),r["default"].prototype.$message=o["Message"],r["default"].config.productionTip=!1,i.a.interceptors.request.use(function(e){if(-1===e.url.indexOf("/api/login")){var t=d.getAuthToken();t&&(e.headers.Authorization=t)}return e}),i.a.interceptors.response.use(function(e){return e},function(e){if(401===e.response.status){var t=Fe.currentRoute.fullPath;-1===t.indexOf("/login")&&Fe.push({path:"/login",query:{redirect:t}})}return Promise.reject(e)}),window.eventBus=new r["default"],new r["default"]({router:Fe,render:function(e){return e(y)}}).$mount("#app")},5730:function(e,t,n){e.exports=n.p+"img/pdf.64e6958c.svg"},"5c0b":function(e,t,n){"use strict";var a=n("458f"),i=n.n(a);i.a},"5c5b":function(e,t,n){e.exports=n.p+"img/up.da14d0f0.svg"},"697f":function(e,t,n){"use strict";var a=n("0f0c"),i=n.n(a);i.a},7984:function(e,t,n){"use strict";var a=n("eab4"),i=n.n(a);i.a},"8df6":function(e,t,n){},"91d1":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("d4ec"),i=n("bee2"),r=function(){function e(){Object(a["a"])(this,e)}return Object(i["a"])(e,null,[{key:"available",value:function(){var e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}},{key:"getItem",value:function(t){return e.available()?localStorage.getItem(t):null}},{key:"setItem",value:function(t,n){e.available()&&localStorage.setItem(t,n)}},{key:"removeItem",value:function(t){e.available()&&localStorage.removeItem(t)}}]),e}()},"9ce6":function(e,t,n){"use strict";n.d(t,"a",function(){return f});var a=n("d4ec"),i=n("bee2"),r=(n("cadf"),n("551c"),n("097d"),n("bc3a")),o=n.n(r),s=n("91d1"),l="AUTH_TOKEN",c="USER_NAME",u="USER_AUTH_INFO",f=function(){function e(){Object(a["a"])(this,e)}return Object(i["a"])(e,null,[{key:"login",value:function(e,t){return o.a.post("/api/login",{username:e,password:t},{headers:{"Content-Type":"application/json"}}).then(function(t){return s["a"].setItem(l,t.data.token),s["a"].setItem(c,e),Promise.resolve(t)},function(e){return s["a"].removeItem(l),s["a"].removeItem(c),Promise.reject(e)})}},{key:"logout",value:function(){return o.a.delete("/api/logout").then(function(e){return s["a"].removeItem(l),s["a"].removeItem(c),s["a"].removeItem(u),Promise.resolve(e)},function(e){return s["a"].removeItem(l),s["a"].removeItem(c),s["a"].removeItem(u),Promise.reject(e)})}}]),e}()},a460:function(e,t,n){},a5da:function(e,t,n){"use strict";var a=n("0ffd"),i=n.n(a);i.a},a60a:function(e,t,n){},abe2:function(e,t,n){},d8aa:function(e,t,n){e.exports=n.p+"img/down.cdbdf3e2.svg"},eab4:function(e,t,n){},ec13:function(e,t,n){"use strict";var a=n("8df6"),i=n.n(a);i.a},f6d2:function(e,t,n){},fb8b:function(e,t,n){"use strict";var a=n("3c42"),i=n.n(a);i.a}});
//# sourceMappingURL=app.093e64f1.js.map